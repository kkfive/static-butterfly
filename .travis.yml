language: node_js
node_js:
  - '14'

sudo: required

# Travis-CI Caching
cache:
  yarn: true

# S: Build Lifecycle
install:
  - yarn install

script:
  - yarn build
  - cp ./css/index.*.css ./css/index.min.css
  - cp ./css/font.*.css ./css/font.min.css
  - npm config set //registry.npmjs.org/:_authToken=${NPM_TOKEN}
  - npm publish
  - curl https://purge.jsdelivr.net/npm/static-butterfly@latest/dist/css/index.min.css
  - curl https://purge.jsdelivr.net/npm/static-butterfly@latest/dist/css/font.min.css
